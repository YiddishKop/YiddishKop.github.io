<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-08-12 日 14:58 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>第十二课 Abstract Class</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="yiddishkop" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
 <link rel='stylesheet' href='css/site.css' type='text/css'/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="index.html"> UP </a>
 |
 <a accesskey="H" href="/index.html"> HOME </a>
</div><div id="content">
<h1 class="title">第十二课 Abstract Class</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6a89d8f">1. ABSTRACT CLASSES</a></li>
<li><a href="#org26842a6">2. JAVA INTERFACES</a></li>
</ul>
</div>
</div>



<div id="org6a89d8f" class="outline-2">
<h2 id="org6a89d8f"><span class="section-number-2">1</span> ABSTRACT CLASSES</h2>
<div class="outline-text-2" id="text-1">
<p>
An abstract class is a class whose sole purpose is to be extended.
</p>

<div class="org-src-container">
<pre class="src src-java"><span class="org-keyword">public</span> <span class="org-keyword">abstract</span> <span class="org-keyword">class</span> <span class="org-type">List</span> {
  <span class="org-keyword">protected</span> <span class="org-type">int</span> <span class="org-variable-name">size</span>;

  <span class="org-keyword">public</span> <span class="org-type">int</span> <span class="org-function-name">length</span>() {
    <span class="org-keyword">return</span> size;
  }

  <span class="org-keyword">public</span> <span class="org-keyword">abstract</span> <span class="org-type">void</span> <span class="org-function-name">insertFront</span>(<span class="org-type">Object</span> <span class="org-variable-name">item</span>);
}
</pre>
</div>

<p>
Abstract classes don't allow you to create objects directly.  You can declare a
variable of type List, but you can't create a List object.
</p>

<div class="org-src-container">
<pre class="src src-java"><span class="org-type">List</span> <span class="org-variable-name">myList</span>;                 <span class="org-comment-delimiter">// </span><span class="org-comment">Right on.</span>
myList = <span class="org-keyword">new</span> <span class="org-type">List</span>();         <span class="org-comment-delimiter">// </span><span class="org-comment">COMPILE-TIME ERROR.</span>
</pre>
</div>

<p>
However, abstract classes can be extended in the same way as ordinary classes,
and the subclasses are usually not abstract.  (They can be, but usually they're
normal subclasses with complete implementations.)
</p>

<p>
The abstract List class above includes an abstract method, insertFront.  An
abstract method lacks an implementation.  One purpose of an abstract method is
to guarantee that every non-abstract subclass will implement the method.
Specifically, every non-abstract subclass of List must have an implementation
for the insertFront method.
</p>

<div class="org-src-container">
<pre class="src src-java"><span class="org-keyword">public</span> <span class="org-keyword">class</span> <span class="org-type">SList</span> <span class="org-keyword">extends</span> <span class="org-type">List</span> {
  <span class="org-comment-delimiter">// </span><span class="org-comment">inherits the "size" field.</span>
  <span class="org-keyword">protected</span> <span class="org-type">SListNode</span> <span class="org-variable-name">head</span>;

  <span class="org-comment-delimiter">// </span><span class="org-comment">inherits the "length" method.</span>

  <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">insertFront</span>(<span class="org-type">Object</span> <span class="org-variable-name">item</span>) {
    head = <span class="org-keyword">new</span> <span class="org-type">SListNode</span>(item, head);
    size++;
  }
}
</pre>
</div>


<p>
If you leave out the implementation of insertFront in SList, the Java compiler
will complain that you must provide one.  A non-abstract class may never
contain an abstract method, nor inherit one without providing an
implementation.
</p>

<p>
Because SList is not abstract, we can create SList objects; and because SLists
are Lists, we can assign an SList to a List variable.
</p>

<pre class="example">
List myList = new SList();   // Right on.
myList.insertFront(obj);     // Right on.
</pre>
<p>
What are abstract classes good for?  It's all about the interface.
</p>

<pre class="example">
----------------------------------------------------
|  An abstract class lets you define an interface  |
|    - for multiple classes to share,              |
|    - without defining any of them yet.           |
----------------------------------------------------
</pre>

<p>
Let's consider the List class. Although the List class is abstract, it is an
ADT&#x2013;even without any implementation!&#x2013; because it has an interface with public
method prototypes and well-defined behaviors. We can implement an algorithm&#x2013;for
example, a list sorter&#x2013;based on the List interface, without ever knowing how
the lists will be implemented. One list sorter can sort every kind of List.
</p>

<div class="org-src-container">
<pre class="src src-java"><span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">listSort</span>(<span class="org-type">List</span> <span class="org-variable-name">l</span>) { ... }
</pre>
</div>

<p>
In another part of the universe, your project partners can build lots of
subclasses of List:  SList, DList, TailList, and so on.  They can also build
special-case List subclasses: for example, a TimedList that records the amount
of time spent doing List operations, and a TransactionList that logs all
changes made to the list on a disk so that all information can be recovered if
a power outage occurs.  A library catalogue application that uses DLists can
send them to your listSort algorithm to be sorted.  An airline flight database
that uses TransactionLists can send them to you for sorting, too, and you don't
have to change a line of sorting code.  You may have written your list sorter
years before TransactionLists were ever thought of.
</p>

<div class="org-src-container">
<pre class="src src-java">-----------------   The list sorter is built on the foundation of a list
|  Application  |   ADT, and the application is built on the <span class="org-type">foundation</span> <span class="org-variable-name">of</span>
-----------------   the list <span class="org-constant">sorter</span>.  However, it<span class="org-warning">'</span>s the application, and
        |           not the list sorter, that gets to choose what <span class="org-type">kind</span> <span class="org-variable-name">of</span>
        | calls     list is actually used, and thereby obtains special
        v           features like transaction <span class="org-constant">logging</span>.  This is <span class="org-type">a</span> <span class="org-variable-name">big</span>
-----------------   advantage of object-oriented languages like Java.
|  List Sorter  |
-----------------
        |
        | calls
        v
-----------------
|   List ADT    |
-----------------

</pre>
</div>
<p>

</p>
</div>
</div>
<div id="org26842a6" class="outline-2">
<h2 id="org26842a6"><span class="section-number-2">2</span> JAVA INTERFACES</h2>
<div class="outline-text-2" id="text-2">
<p>
Java has an "interface" keyword which refers to something quite different than
the interfaces I defined in Lecture 8, even though the two interfaces are
related.  Henceforth, when I say "interfaces" I mean public fields, public
method prototypes, and the behaviors of public methods.  When I say "Java
interfaces" I mean Java's "interface" keyword.
</p>

<pre class="example">
A Java interface is just like an abstract class, except for two differences.
(1)  In Java, a class can inherit from only one class, even if the superclass
     is an abstract class.  However, a class can "implement" (inherit from) as
     many Java interfaces as you like.
(2)  A Java interface cannot implement any methods, nor can it include any
     fields except "final static" constants.  It only contains method
     prototypes and constants.
</pre>

<div class="org-src-container">
<pre class="src src-java"><span class="org-keyword">public</span> <span class="org-keyword">interface</span> <span class="org-type">Nukeable</span> {               <span class="org-comment-delimiter">// </span><span class="org-comment">In Nukeable.java</span>
  <span class="org-keyword">public</span> <span class="org-type">void</span> <span class="org-function-name">nuke</span>();
}

<span class="org-keyword">public</span> <span class="org-keyword">interface</span> <span class="org-type">Comparable</span> {             <span class="org-comment-delimiter">// </span><span class="org-comment">In java.lang</span>
  <span class="org-keyword">public</span> <span class="org-type">int</span> <span class="org-function-name">compareTo</span>(<span class="org-type">Object</span> <span class="org-variable-name">o</span>);
}

<span class="org-keyword">public</span> <span class="org-keyword">class</span> <span class="org-type">SList</span> <span class="org-keyword">extends</span> <span class="org-type">List</span> <span class="org-keyword">implements</span> <span class="org-type">Nukeable</span>, <span class="org-type">Comparable</span> {
  [Previous stuff here.]

  <span class="org-keyword">public</span> <span class="org-type">void</span> nuke() {
    head = <span class="org-constant">null</span>;
    size = <span class="org-highlight-numbers-number">0</span>;
  }

  <span class="org-keyword">public</span> <span class="org-type">int</span> <span class="org-function-name">compareTo</span>(<span class="org-type">Object</span> <span class="org-variable-name">o</span>) {
    [Returns a number &lt; <span class="org-highlight-numbers-number">0</span> <span class="org-keyword">if</span> <span class="org-keyword">this</span> &lt; o,
                        <span class="org-highlight-numbers-number">0</span> <span class="org-keyword">if</span> <span class="org-keyword">this</span>.equals(o),
                      &gt; <span class="org-highlight-numbers-number">0</span> <span class="org-keyword">if</span> <span class="org-keyword">this</span> &gt; o.]
  }
}
</pre>
</div>

<p>
Observe that the method prototypes in a Java interface may be declared without
the "abstract" keyword, because it would be redundant; a Java interface cannot
contain a method implementation.
</p>

<p>
The distinction between abstract classes and Java interfaces exists because of
technical reasons that you might begin to understand if you take CS 164
(Compilers).  Some languages, like C++, allow "multiple inheritance," so that a
subclass can inherit from several superclasses.  Java does not allow multiple
inheritance in its full generality, but it offers a sort of crippled form of
multiple inheritance:  a class can "implement" multiple Java interfaces.
</p>

<p>
Why does Java have this limitation?  Multiple inheritance introduces a lot of
problems in both the definition of a language and the efficient implementation
of a language.  For example, what should we do if a class inherits from two
different superclasses two different methods or fields with the same name?
Multiple inheritance is responsible for some of the scariest tricks and traps
of the C++ language, subtleties that cause much wailing and gnashing of teeth.
Java interfaces don't have these problems.
</p>

<p>
Because an <code>SList</code> is a Nukeable and a Comparable, we can assign it to variables
of these types.
</p>

<div class="org-src-container">
<pre class="src src-java"><span class="org-type">Nukeable</span> <span class="org-variable-name">n</span> = <span class="org-keyword">new</span> <span class="org-type">SList</span>();
<span class="org-type">Comparable</span> <span class="org-variable-name">c</span> = (<span class="org-type">Comparable</span>) n;
</pre>
</div>

<p>
The cast is required because not every Nukeable is a Comparable.
</p>

<p>
"Comparable" is a standard interface in the Java library.  By having a class
implement Comparable, you immediately gain access to Java's sorting library.
For instance, the Arrays class in java.util includes a method that sorts arrays
of Comparable objects.
</p>

<div class="org-src-container">
<pre class="src src-java"><span class="org-keyword">public</span> <span class="org-keyword">static</span> <span class="org-type">void</span> <span class="org-function-name">sort</span>(<span class="org-type">Object</span>[] <span class="org-variable-name">a</span>)       <span class="org-comment-delimiter">// </span><span class="org-comment">In java.util</span>
</pre>
</div>

<p>
The parameter's type is <code>Object[]</code>, but a run-time error will occur if any item
stored in a is not a Comparable.
</p>

<p>
Interfaces can be extended with subinterfaces.  A subinterface can have
multiple superinterfaces, so we can group several interfaces into one.
</p>

<div class="org-src-container">
<pre class="src src-java"><span class="org-keyword">public</span> <span class="org-keyword">interface</span> <span class="org-type">NukeAndCompare</span> <span class="org-keyword">extends</span> <span class="org-type">Nukeable</span>, <span class="org-type">Comparable</span> { }
</pre>
</div>

<p>
We could also add more method prototypes and constants, but in this example I
don't.
</p>
</div>
</div>
</div>
</body>
</html>
